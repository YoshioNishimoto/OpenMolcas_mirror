* This is a "clone" of test 047
* Note the checkfiles are identical, except:
*   - Some combinations make no sense with HDF5
*   - Changing the order of states in CASPT2 has an effect here,
*     but not without HDF5
*
>> RM -FORCE TEST_HDF5
>> IF ( $MOLCAS_DRIVER = UNKNOWN_VARIABLE )
>>   EXPORT MOLCAS_DRIVER=molcas
>> ENDIF
>> SHELL $MOLCAS_DRIVER have_feature hdf5 || touch TEST_HDF5
>> IF ( -FILE TEST_HDF5 )
>>   EXIT 36
>> ENDIF

>> EXPORT MOLCAS_PRINT=VERBOSE

&SEWARD
  Symmetry = xyz
  mGauss
  Multipoles = 0
  Basis = Ge.ANO-RCC...5s4p2d.
    Ge  0.0  0.0  0.0
  End of Basis
  XField = 2
    4.0 5.0 6.0    2.0 0.0 0.0 0.0
   -4.0 5.0 6.0    2.0 0.0 0.0 0.0
  NoCD

&SCF
  FileOrb    = $Project.guessorb.h5
  Charge     = 2
  Thresholds = 1e-10 1e-6 5e-8 2e-6

&RASSCF
  FileOrb    = $Project.scf.h5
  Symmetry   = 1
  Spin       = 1
  nActEl     = 4 0 0
  Inactive   = 8 6
  Ras2       = 1 3
  LevShft    = 0.5
  Iterations = 200 50
  CIMx       = 48
  CIRoot     = 6 6
               1 6 2 5 3 4
               1 1 1 1 1 1
  Thrs       = 1e-10 1e-06 1e-06
  Tight      = 1e-08 1e-6

&CASPT2
  FileOrb     = $Project.rasscf.h5
  MaxIter     = 25
  IPEA        = 0.25
  Multistate  = 6  1 2 3 4 5 6
  Convergence = 1e-9
  Properties

* Use RASSCF energies
>> COPY $Project.rasscf.h5 CASSCF

&RASSI
  NrOfJobIphs = 1 all
  IphNames = CASSCF

* Use SS-CASPT2 energies (EJOB)
>> COPY $Project.caspt2.h5 CASPT2

&RASSI
  NrOfJobIphs = 1 all
  IphNames = CASPT2
  EJob

* Use MS-CASPT2
>> COPY $Project.caspt2.h5 CASPT2

&RASSI
  NrOfJobIphs = 1 all
  IphNames = CASPT2

* XMS calculation
&CASPT2
  FileOrb     = $Project.rasscf.h5
  MaxIter     = 25
  IPEA        = 0.0
  XMultistate = all
  Convergence = 1e-9

* Use XMS-CASPT2
>> COPY $Project.caspt2.h5 CASPT2

&RASSI
  NrOfJobIphs = 1 all
  IphNames = CASPT2

* Subset of states
&CASPT2
  FileOrb     = $Project.rasscf.h5
  MaxIter     = 25
  IPEA        = 0.25
  Multistate  = 3  6 4 1
  Convergence = 1e-9

* Use MS-CASPT2
>> COPY $Project.caspt2.h5 CASPT2
>> COPY $Project.caspt2.h5 save.caspt2.h5

&RASSI
  NrOfJobIphs = 1 3 ; 1 4 6
  IphNames = CASPT2

* Subset XMS + NoMult
&CASPT2
  FileOrb     = $Project.rasscf.h5
  MaxIter     = 25
  IPEA        = 0.0
  XMultistate = 3  1 4 6
  NoMultistate
  Convergence = 1e-9

* Use XSS-CASPT2 (EJOB)
>> COPY $Project.caspt2.h5 CASPT2

&RASSI
  NrOfJobIphs = 1 all
  IphNames = CASPT2
  EJob

>>FILE checkfile
* This file is autogenerated:
* Molcas version 20.10-914-g5023b6f41
* Linux dirac 5.10.7-3-MANJARO #1 SMP PREEMPT Fri Jan 15 21:11:34 UTC 2021 x86_64 GNU/Linux
* Wed Feb 10 09:13:39 2021
*
#>>   1
#> SEWARD_KINETIC="17955988.950000014156"/5
#> SEWARD_ATTRACT="-168788.747221128346"/5
#> POTNUC="29.173907573667"/12
#> SEWARD_KINETIC="552.394993687088"/5
#> SEWARD_ATTRACT="-1058.908565952243"/5
#>>   2
#> SCF_ITER="14"/8
#> E_SCF="-2094.329154029807"/8
#> MLTPL__0="2"/5
#>>   3
#> RASSCF_ITER="9"/8
#> E_RASSCF[0]="-2097.003291605219"/8
#> E_RASSCF[1]="-2096.888112736274"/8
#> E_RASSCF[2]="-2096.972884650142"/8
#> E_RASSCF[3]="-2096.920335075064"/8
#> E_RASSCF[4]="-2096.959738898131"/8
#> E_RASSCF[5]="-2096.925800888595"/8
#> MLTPL__0="-0.000000000000"/5
#> MLTPL__0="-0.000000000000"/5
#> MLTPL__0="-0.000000000000"/5
#> MLTPL__0="-0.000000000000"/5
#> MLTPL__0="-0.000000000000"/5
#> MLTPL__0="-0.000000000000"/5
#>>   4
#> E_CASPT2="-2097.022010445500"/8
#> MLTPL__0="-0.000000000000"/5
#> E_CASPT2="-2096.992805987138"/8
#> MLTPL__0="-0.000000000000"/5
#> E_CASPT2="-2096.979871621847"/8
#> MLTPL__0="-0.000000000000"/5
#> E_CASPT2="-2096.946032574112"/8
#> MLTPL__0="-0.000000000000"/5
#> E_CASPT2="-2096.940965883080"/8
#> MLTPL__0="-0.000000000000"/5
#> E_CASPT2="-2096.906953225677"/8
#> MLTPL__0="-0.000000000000"/5
#> E_MSPT2[0]="-2097.022027937662"/8
#> E_MSPT2[1]="-2096.992805987138"/8
#> E_MSPT2[2]="-2096.979871621847"/8
#> E_MSPT2[3]="-2096.946058337021"/8
#> E_MSPT2[4]="-2096.940965883080"/8
#> E_MSPT2[5]="-2096.906909970606"/8
#>>   5
#> E_RASSI[0]="-2097.003291605216"/6
#> E_RASSI[1]="-2096.888112736272"/6
#> E_RASSI[2]="-2096.972884650138"/6
#> E_RASSI[3]="-2096.920335075061"/6
#> E_RASSI[4]="-2096.959738898128"/6
#> E_RASSI[5]="-2096.925800888593"/6
#>>   6
#> E_RASSI[0]="-2097.022010445500"/6
#> E_RASSI[1]="-2096.992805987138"/6
#> E_RASSI[2]="-2096.979871621847"/6
#> E_RASSI[3]="-2096.946032574112"/6
#> E_RASSI[4]="-2096.940965883080"/6
#> E_RASSI[5]="-2096.906953225677"/6
#>>   7
#> E_RASSI[0]="-2097.022027937664"/6
#> E_RASSI[1]="-2096.992805987139"/6
#> E_RASSI[2]="-2096.979871621850"/6
#> E_RASSI[3]="-2096.946058337025"/6
#> E_RASSI[4]="-2096.940965883081"/6
#> E_RASSI[5]="-2096.906909970608"/6
#>>   8
#> E_CASPT2="-2097.023932417266"/8
#> E_CASPT2="-2096.909048338916"/8
#> E_CASPT2="-2096.994600419143"/8
#> E_CASPT2="-2096.942852360493"/8
#> E_CASPT2="-2096.981694231122"/8
#> E_CASPT2="-2096.947775130429"/8
#> E_MSPT2[0]="-2097.023958972625"/8
#> E_MSPT2[1]="-2096.994600419143"/8
#> E_MSPT2[2]="-2096.981694231122"/8
#> E_MSPT2[3]="-2096.947865140912"/8
#> E_MSPT2[4]="-2096.942852360493"/8
#> E_MSPT2[5]="-2096.908931773075"/8
#>>   9
#> E_RASSI[0]="-2097.023958972625"/6
#> E_RASSI[1]="-2096.908931773077"/6
#> E_RASSI[2]="-2096.994600419143"/6
#> E_RASSI[3]="-2096.942852360497"/6
#> E_RASSI[4]="-2096.981694231124"/6
#> E_RASSI[5]="-2096.947865140913"/6
#>>  10
#> E_CASPT2="-2096.906953225677"/8
#> E_CASPT2="-2096.946032574112"/8
#> E_CASPT2="-2097.022010445500"/8
#> E_MSPT2[0]="-2097.022027937662"/8
#> E_MSPT2[1]="-2096.946058337021"/8
#> E_MSPT2[2]="-2096.906909970606"/8
#>>  11
#> E_RASSI[0]="-2097.022027937663"/6
#> E_RASSI[1]="-2096.946058337022"/6
#> E_RASSI[2]="-2096.906909970607"/6
#>>  12
#> E_CASPT2="-2097.023949037587"/8
#> E_CASPT2="-2096.947793546616"/8
#> E_CASPT2="-2096.909067364640"/8
#>>  13
#> E_RASSI[0]="-2097.023949037587"/6
#> E_RASSI[1]="-2096.947793546616"/6
#> E_RASSI[2]="-2096.909067364640"/6
>>EOF
